<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Colorlib Templates">
    <meta name="author" content="Colorlib">
    <meta name="keywords" content="Colorlib Templates">

    <!-- Title Page-->
    <title>Javascript Test</title>

    <!-- Icons font CSS-->
    <link href="vendor/mdi-font/css/material-design-iconic-font.min.css" rel="stylesheet" media="all">
    <link href="vendor/font-awesome-4.7/css/font-awesome.min.css" rel="stylesheet" media="all">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!-- Font special for pages-->
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

    <!-- Vendor CSS-->
    <link href="vendor/select2/select2.min.css" rel="stylesheet" media="all">
    <link href="vendor/datepicker/daterangepicker.css" rel="stylesheet" media="all">

    <!-- Main CSS-->
    <link href="css/main.css" rel="stylesheet" media="all">
</head>

<body>
    <div class="page-wrapper bg-gra-02 p-t-130 p-b-100 font-poppins">
        <div class="wrapper wrapper--w680">
            <div class="card card-4">
                 
                <div id="item_table">

                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                          <li class="breadcrumb-item"><a href="#">Home</a></li>
                          <li class="breadcrumb-item" id="phistory" style="cursor:pointer; color:blue">Purchase History</li>
                          <li class="breadcrumb-item" id="logout" style="cursor:pointer; color:blue">Logout</li>
                        </ol>
                      </nav>

                    <table class="table">
                        <thead>
                          <tr>
                            <th scope="col">#</th>
                            <th scope="col">Item Name</th>
                            <th scope="col">Price</th>
                            <th scope="col">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <th scope="row">1</th>
                            <td class="item_name">Orange</td>
                            <td class="price">$20</td>
                            <td><button type="button" class="btn btn-primary btn-sm cart">Make Purchase</button></td>
                          </tr>
                          <tr>
                            <th scope="row">2</th>
                            <td class="item_name">Pawpaw</td>
                            <td class="price">$25</td>
                            <td><button type="button" class="btn btn-primary btn-sm cart">Make Purchase</button></td>
                          </tr>
                          <tr>
                            <th scope="row">3</th>
                            <td class="item_name">Pinneapple</td>
                            <td class="price">$30</td>
                            <td><button type="button" class="btn btn-primary btn-sm cart">Make Purchase</button></td>
                          </tr>
                        </tbody>
                      </table>
                </div>
                


                <div class="card-body" id="reg_form">
                    <h2 class="title">Registration Form</h2>
                    <form method="POST" >
                        <div class="row row-space">
                            <div class="col-6">
                                <div class="input-group">
                                    <label class="label">first name</label>
                                    <input class="input--style-4" type="text" name="first_name" id="first_name">
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="input-group">
                                    <label class="label">last name</label>
                                    <input class="input--style-4" type="text" name="last_name" id="last_name">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row row-space">
                            <div class="col-6">
                                <div class="input-group">
                                    <label class="label">Password</label>
                                    <input class="input--style-4" type="password" name="phone" id="password">
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="input-group">
                                    <label class="label">Confirm password</label>
                                    <input class="input--style-4" type="password" name="phone" id="cpassword">
                                </div>
                            </div>
                        </div>
                        
                        <div class="p-t-15">
                            <button class="btn btn--radius-2 btn--blue" id="submit" type="submit">Submit</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Jquery JS-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <!-- Vendor JS-->
    <script src="vendor/select2/select2.min.js"></script>
    <script src="vendor/datepicker/moment.min.js"></script>
    <script src="vendor/datepicker/daterangepicker.js"></script>

    <!-- Main JS-->
    <script src="js/global.js"></script>

    <script>

        $(document).ready(function(){

            if(sessionStorage.getItem('userdata')){
                $("#item_table").show();
                $("#reg_form").hide();
            }
            else{
                $("#item_table").hide();
            }

            


            $("#submit").click(function(event){
                event.preventDefault();
                var first_name=$("#fist_name").val();
            var last_name=$("#last_name").val();
            var password=$("#password").val();

            var id = "id" + Math.random().toString(16).slice(2)

            var cpassword=$("#cpassword").val();
            if(password==cpassword){
                sessionStorage.setItem('userdata', {session_id: id, password : cpassword, fullname:first_name+last_name});
                $("#item_table").show();
                $("#reg_form").hide();
            }
            else{
                alert("Wrong Password");
            }

            
  
            
            });

            $('.cart').click(function(){
        var item_name = $(this).parent().siblings('.item_name').text();
        var item_price = $(this).parent().siblings('.price').text();
        var fruits = [];
sessionStorage.setItem('items', JSON.stringify({"item_name":item_name,"status":item_price}));
alert("Item Purchased Succesffully");
//alert(JSON.stringify(fruits)); 

// var obj = JSON.parse(sessionStorage.getItem('data'));
// obj['paiditems'].push({"item_name":item_name,"status":item_price});

    });

    $("#logout").click(function(){
        sessionStorage.clear();
        $("#item_table").hide();
        $("#reg_form").show();
    })


    $("#phistory").click(function(){
        var obj = JSON.parse(sessionStorage.items);
        alert(JSON.stringify(obj));
    })
            
        });
            
    </script>

</body><!-- This templates was made by Colorlib (https://colorlib.com) -->

</html>
<!-- end document-->